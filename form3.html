<!DOCTYPE html>
<html lang="ur">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gold Calculator</title>
  <style>
    /* ---------------- GLOBAL STYLES ---------------- */
    body {
      background-color: #121212;
      color: #E0E0E0;
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 0px;
      box-sizing: border-box;
    }

    .calculator-container {
      width: 100%;
      max-width: 420px;
      background-color: #121212;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.6);
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .input-section {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 4px;
      position: relative;
    }

    .input-fields {
      display: flex;
      gap: 6px;
      flex-grow: 1;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      flex: 1;
      position: relative;
    }

    .input-group label {
      position: absolute;
      top: 6px;
      left: 10px;
      font-size: 0.8em;
      color: #AAAAAA;
      pointer-events: none;
      transition: 0.2s ease all;
    }

    .input-group input:focus + label,
    .input-group input:not(:placeholder-shown) + label {
      top: -8px;
      font-size: 0.7em;
      background-color: #1E1E1E;
      padding: 0 4px;
      color: #4CAF50;
    }

    .input-group input,
    .input-group select {
      background-color: transparent;
      border: 1px solid #555;
      border-radius: 8px;
      color: white;
      width: 100%;
      text-align: center;
      font-size: 1em;
      padding: 10px 8px;
      box-sizing: border-box;
      height: 40px;
      -moz-appearance: textfield;
      -webkit-appearance: none;
    }

    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    .unit-group label {
      position: absolute;
      top: -8px;
      left: 8px;
      font-size: 0.7em;
      background-color: #1E1E1E;
      padding: 0 4px;
      color: #4CAF50;
    }

    .section-label {
      font-size: 1em;
      color: #E0E0E0;
      white-space: nowrap;
      margin-left: 6px;
    }

    /* ---------------- RESULTS SECTION ---------------- */
    .results-section {
      border-top: 1px solid #444;
      padding-top: 10px;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .result-header {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 2fr;
      text-align: center;
      font-size: 0.8em;
      color: #AAAAAA;
      padding-bottom: 5px;
    }

    .result-row {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 2fr;
      align-items: center;
      text-align: center;
      font-size: 1em;
    }

    .result-row .label {
      text-align: right;
      padding-right: 10px;
      color: #AAAAAA;
      font-size: 0.85em;
    }

    .result-value {
      font-weight: bold;
    }

    .total-price {
      margin-top: 12px;
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 1.3em;
      padding: 12px;
      background-color: #252525;
      border-radius: 10px;
    }

    .total-price .label {
      font-size: 0.8em;
      color: #AAAAAA;
    }

    .total-price .value {
      font-weight: bold;
      color: #4CAF50;
    }

    /* ---------------- CLEAR BUTTON ---------------- */
    #clear-button {
      background-color: #333333;
      color: #E0E0E0;
      border: 1px solid #555;
      border-radius: 8px;
      padding: 10px;
      cursor: pointer;
      font-size: 1.1em;
      transition: background-color 0.3s;
      margin-bottom: 25px;
    }

    #clear-button:hover {
      background-color: #444444;
    }
  </style>
</head>
<body>

  <div class="calculator-container">
    <!-- -------- Section: Total Weight -------- -->
    <div class="input-section">
      <div class="input-fields">
        <div class="input-group">
          <input type="number" id="tola-input" placeholder=" " />
          <label for="tola-input">تولہ</label>
        </div>
        <div class="input-group">
          <input type="number" id="masha-input" placeholder=" " />
          <label for="masha-input">ماشہ</label>
        </div>
        <div class="input-group">
          <input type="number" id="ratti-input" placeholder=" " />
          <label for="ratti-input">رتی</label>
        </div>
      </div>
      <span class="section-label">کل وزن</span>
    </div>

    <!-- -------- Section: Cut per Tola -------- -->
    <div class="input-section">
      <div class="input-fields">
        <div class="input-group unit-group">
          <select id="cut-unit">
            <option value="ratti">رتی</option>
            <option value="masha">ماشہ</option>
          </select>
          <label for="cut-unit">یونٹ</label>
        </div>
        <div class="input-group">
          <input type="number" id="cut-input" placeholder=" " />
          <label for="cut-input">کاٹ</label>
        </div>
      </div>
      <span class="section-label">کاٹ فی تولہ</span>
    </div>

    <!-- -------- Section: Rate per Tola -------- -->
    <div class="input-section">
      <div class="input-fields">
        <div class="input-group">
          <input type="number" id="price-input" placeholder=" " />
          <label for="price-input">ریٹ</label>
        </div>
      </div>
      <span class="section-label">ریٹ فی تولہ</span>
    </div>

    <!-- -------- Results Section -------- -->
    <div class="results-section">
      <div class="result-header">
        <span>تولہ</span>
        <span>ماشہ</span>
        <span>رتی</span>
        <span></span>
      </div>
      
      <div class="result-row" id="total-weight-result">
        <span class="result-value">0</span>
        <span class="result-value">0</span>
        <span class="result-value">0.0</span>
        <span class="label">کل وزن</span>
      </div>

      <div class="result-row" id="total-cut-result">
        <span class="result-value">0</span>
        <span class="result-value">0</span>
        <span class="result-value">0.0</span>
        <span class="label">کل کاٹ</span>
      </div>

      <div class="result-row" id="net-weight-result">
        <span class="result-value">0</span>
        <span class="result-value">0</span>
        <span class="result-value">0.0</span>
        <span class="label">خالص وزن</span>
      </div>

      <div class="total-price" id="total-price-result">
        <span class="value">0.00</span>
        <span class="label">کل رقم</span>
      </div>
    </div>

    <button id="clear-button">Clear</button>
  </div>

  <script>
    const tolaInput = document.getElementById('tola-input');
    const mashaInput = document.getElementById('masha-input');
    const rattiInput = document.getElementById('ratti-input');
    const cutInput = document.getElementById('cut-input');
    const cutUnitSelect = document.getElementById('cut-unit');
    const priceInput = document.getElementById('price-input');
    const clearButton = document.getElementById('clear-button');

    const totalWeightResult = document.getElementById('total-weight-result').children;
    const totalCutResult = document.getElementById('total-cut-result').children;
    const netWeightResult = document.getElementById('net-weight-result').children;
    const totalPriceResult = document.getElementById('total-price-result').children[0];

    const GRAMS_PER_TOLA = 11.664;
    const GRAMS_PER_MASHA = 0.972;
    const GRAMS_PER_RATTI = 0.1215;

    function calculate() {
      const tola = parseFloat(tolaInput.value) || 0;
      const masha = parseFloat(mashaInput.value) || 0;
      const ratti = parseFloat(rattiInput.value) || 0;
      const cutValue = parseFloat(cutInput.value) || 0;
      const pricePerTola = parseFloat(priceInput.value) || 0;
      const cutUnit = cutUnitSelect.value;

      const totalGrams = (tola * GRAMS_PER_TOLA) + (masha * GRAMS_PER_MASHA) + (ratti * GRAMS_PER_RATTI);

      let totalCutGrams = 0;
      if (totalGrams > 0 && cutValue > 0) {
        if (cutUnit === 'ratti') {
          totalCutGrams = (totalGrams / 96) * cutValue;
        } else if (cutUnit === 'masha') {
          totalCutGrams = (totalGrams / 12) * cutValue;
        }
      }

      const netGrams = totalGrams - totalCutGrams;
      const finalPrice = (netGrams / GRAMS_PER_TOLA) * pricePerTola;

      updateResults(totalGrams, totalCutGrams, netGrams, finalPrice);
    }

    function convertGramsToTMR(grams) {
      if (grams <= 0) return { tola: 0, masha: 0, ratti: 0.0 };
      const epsilon = 1e-9;
      grams += epsilon;

      const totalTolaDecimal = grams / GRAMS_PER_TOLA;
      const tola = Math.floor(totalTolaDecimal);

      const remainingGramsAfterTola = grams - (tola * GRAMS_PER_TOLA);
      const totalMashaDecimal = remainingGramsAfterTola / GRAMS_PER_MASHA;
      const masha = Math.floor(totalMashaDecimal);

      const remainingGramsAfterMasha = remainingGramsAfterTola - (masha * GRAMS_PER_MASHA);
      const ratti = remainingGramsAfterMasha / GRAMS_PER_RATTI;

      return { tola, masha, ratti: parseFloat(ratti.toFixed(1)) };
    }

    function updateResults(totalGrams, totalCutGrams, netGrams, finalPrice) {
      const totalWeightTMR = convertGramsToTMR(totalGrams);
      totalWeightResult[0].textContent = totalWeightTMR.tola;
      totalWeightResult[1].textContent = totalWeightTMR.masha;
      totalWeightResult[2].textContent = totalWeightTMR.ratti.toFixed(1);

      const totalCutTMR = convertGramsToTMR(totalCutGrams);
      totalCutResult[0].textContent = totalCutTMR.tola;
      totalCutResult[1].textContent = totalCutTMR.masha;
      totalCutResult[2].textContent = totalCutTMR.ratti.toFixed(1);

      const netWeightTMR = convertGramsToTMR(netGrams);
      netWeightResult[0].textContent = netWeightTMR.tola;
      netWeightResult[1].textContent = netWeightTMR.masha;
      netWeightResult[2].textContent = netWeightTMR.ratti.toFixed(1);

      // ✅ Show price with two decimal digits
      totalPriceResult.textContent = parseFloat(finalPrice.toFixed(2)).toLocaleString();
    }

    function clearAll() {
      tolaInput.value = '';
      mashaInput.value = '';
      rattiInput.value = '';
      cutInput.value = '';
      priceInput.value = '';
      cutUnitSelect.value = 'ratti';
      calculate();
    }

    [tolaInput, mashaInput, rattiInput, cutInput, cutUnitSelect, priceInput].forEach(input => {
      input.addEventListener('input', calculate);
    });

    clearButton.addEventListener('click', clearAll);

    calculate();

    document.querySelectorAll('input[type="number"]').forEach(input => {
      input.addEventListener('focus', () => {
        setTimeout(() => {
          input.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }, 300);
      });
    });
  </script>

</body>
</html>
